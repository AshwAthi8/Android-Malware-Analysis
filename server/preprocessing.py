import os
import sys
from apkutils import APK
import importlib.util
from permissions_list_ar import perm_list
import zipfile

def getPermmissions(path):
	spec = importlib.util.spec_from_file_location("androlyze", "/home/cloud28@cyberdome.org.in/.local/bin/androlyze.py")
	foo = importlib.util.module_from_spec(spec)
	spec.loader.exec_module(foo)
	try:
		handle = foo.APK(path)
		permissions = handle.get_permissions()
	except zipfile.BadZipfile:
		return None, "Bad Zip File!"
	except Exception as e:
		return None, e
	return permissions, "Success"

def onehot_encode(infor):
	final_val = ["0" for i in range(len(perm_list))]
	for i in range(0,len(infor)):
		if infor[i] in perm_list:
			final_val[perm_list.index(infor[i])] = "1"
		else:
			perm_list.append(infor[i])
			final_val.append("1")
	return final_val